---
title: "Using jupytext"
author: "Abhijit Dasgupta"
output: 
  rmdformats::readthedown:
    self_contained: false
    tidy: false
---

# Introduction

## What is `jupytext`?

[jupytext](https://jupytext.readthedocs.io/en/latest/) is a Python package
that allows for the convenient conversion and syncing of Jupyter notebooks (.ipynb files)
to several text formats like Python scripts (.py, either the _percent_ or the _light_ format), 
R Markdown (.rmd), and markdown (.md, either GitHub-flavor or MyST-flavor)

## Why?

Jupyter notebooks (.ipynb) files are written in JSON, and so are hard to version control,
since the incremental differences also include formatting and other structures, rather than just
content. By using `jupytext`, we can keep a text format like a Python script or a markdown-based
document in sync with the Jupyter notebook, automatically, and then put this text representation 
under version control. The text representation also allows the Jupyter notebook to be recreated 
from it, albeit without the outputs. 

This means that someone can share the text representation of a notebook with a colleague, and the
colleague can recreate the notebook, edit it, and sync it back with the text representation. Updates
to the text representation can be easily seen using git diffs, allowing for easier maintenance and 
evaluation and review of changes. Several other use cases are described [here](https://jupytext.readthedocs.io/en/latest/examples.html).


# Installation

You can install `jupytext` using either

```python
pip install jupytext
```

or

```python
conda install jupytext -c conda-forge
```

Additional installation information [here](https://jupytext.readthedocs.io/en/latest/install.html).

# Pairing file formats

`jupytext` includes a set of commands to the command palette in JupyterLab, that
you can access using `View > Activate Command Palette` or `Ctrl + Shift + C`.

![](https://raw.githubusercontent.com/mwouts/jupytext/master/packages/labextension/jupytext_commands.png)
You can select which text representation you want to sync/pair the notebook with. You can pair a notebook with 
multiple text formats, if you like.

Several important issues you might run into while editing a paired notebook as a notebook are
described [here](https://jupytext.readthedocs.io/en/latest/paired-notebooks.html).

# Using `jupytext`

## From the command line

This section describes commands you would run on a terminal or shell window, like 
PowerShell on Windows, Terminal on Linux or Terminal/iTerm2 on a Mac. We assume here
that you have navigated to the folder where the files you will run `jupytext` on reside.

### Converting from a text representation back to a notebook

The basic command for converting a text representation of a notebook generated by `jupytext` back
to a notebook is

```bash
jupytext --to notebook notebook.py              # convert notebook.py to an .ipynb file with no outputs
jupytext --update --to notebook notebook.py     # update the input cells in the .ipynb file and preserve outputs and metadata
```

You can also execute the notebook when you create it from a text representation

```bash
jupytext --set-kernel - notebook.md             # create a YAML header with kernel metadata matching the current python executable
jupytext --set-formats md:myst notebook.md      # create a YAML header with an explicit jupytext format
jupytext --to notebook --execute notebook.md    # convert notebook.md to an .ipynb file and run it
```

> Note that the you can freely exchange between .md/.py/.Rmd in the above commands, i.e., the commands in the 
section above would work just as well if you had a notebook.py or a notebook.Rmd file; you'd just replace notebook.md with
notebook.py or notebook.Rmd in the commands

Much more detail is available [here](https://jupytext.readthedocs.io/en/latest/using-cli.html).

# Additional information and resources

+ The [`jupytext`](upytext.readthedocs.io/) documentation
+ Sample [use cases](https://jupytext.readthedocs.io/en/latest/examples.html)
+ [Jupyter Notebooks in the IDE](https://towardsdatascience.com/jupyter-notebooks-in-the-ide-visual-studio-code-versus-pycharm-5e72218eb3e8) by Mark Wouts

